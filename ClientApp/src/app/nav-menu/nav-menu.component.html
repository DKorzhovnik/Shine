<main class="mat-typography">
  <!-- Toolbar -->
  <mat-toolbar color="primary" class="toolbar">
    <mat-toolbar-row fxLayout="row" fxLayoutAlign="start center">
      <button mat-icon-button (click)="leftnav.toggle()">
        <mat-icon matTooltip="Toggle Side Menu" aria-label="Side nav toggle icon">menu</mat-icon>
      </button>

      <div fxLayout="row" fxLayoutAlign="start center" [routerLink]="['/home']" matTooltip="Home">
        <mat-icon svgIcon="logo" style="width:40px; height:40px"></mat-icon>
        <button class="home-logo" mat-button>Shine</button>
      </div>

      <span class="fill"></span>

      <!-- Apps menu -->
      <button mat-icon-button [matMenuTriggerFor]="apps" matTooltip="Apps">
        <mat-icon>apps</mat-icon>
      </button>
      <mat-menu #apps="matMenu">
        <!-- Row 1 -->
        <div fxLayout="row">
          <!-- Category -->
          <button
            [routerLink]="['/category-buy']"
            mat-menu-item
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayoutGap="8px"
            style="height: 100%;"
          >
            <mat-icon style="font-size: 48px" color="primary">category</mat-icon>
            <span>Category</span>
          </button>
          <!-- Product -->
          <button
            [routerLink]="['/product-buy']"
            mat-menu-item
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayoutGap="8px"
            style="height: 100%;"
          >
            <mat-icon style="font-size: 48px" color="primary">shopping_cart</mat-icon>
            <span>Product</span>
          </button>
          <!-- suppliers -->
          <button
            mat-menu-item
            [routerLink]="['/supplier']"
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayoutGap="8px"
            style="height: 100%;"
          >
            <mat-icon style="font-size: 48px" color="primary">account_circle</mat-icon>
            <span>Supplier</span>
          </button>
        </div>
        <!-- Row 2 -->
        <div fxLayout="row">
          <!-- Customer -->
          <button
            [routerLink]="['/customer']"
            mat-menu-item
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayoutGap="8px"
            style="height: 100%;"
          >
            <mat-icon style="font-size: 48px" color="primary">supervised_user_circle</mat-icon>
            <span>Customer</span>
          </button>

          <!-- Storage -->
          <button
            [routerLink]="['/storage']"
            mat-menu-item
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayoutGap="8px"
            style="height: 100%;"
          >
            <mat-icon style="font-size: 48px" color="primary">storage</mat-icon>
            <span>Storage</span>
          </button>

          <!-- Order -->
          <button
            [routerLink]="['/order-buy']"
            mat-menu-item
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayoutGap="8px"
            style="height: 100%;"
          >
            <mat-icon style="font-size: 48px" color="primary">receipt</mat-icon>
            <span>Order</span>
          </button>
        </div>
        <!-- Row 3 -->
        <div fxLayout="row">
          <button
            [routerLink]="['/admin']"
            mat-menu-item
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayoutGap="8px"
            style="height: 100%;"
          >
            <mat-icon style="font-size: 48px" color="primary">dashboard</mat-icon>
            <span>Admin</span>
          </button>

          <button mat-menu-item fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="8px" style="height: 100%;">
            <mat-icon style="font-size: 48px" color="primary">store</mat-icon>
            <span>Store</span>
          </button>
        </div>
      </mat-menu>

      <!-- Account menu -->
      <div [matMenuTriggerFor]="account" matTooltip="Welcome {{ user }}">
        <mat-icon *ngIf="!isLoggedIn()">lock</mat-icon>

        <div *ngIf="isLoggedIn()" class="user-avatar"></div>
      </div>
      <mat-menu #account="matMenu">
        <button *ngIf="!isLoggedIn()" mat-menu-item (click)="login()">
          <mat-icon aria-label="Login">account_circle</mat-icon>
          Login
        </button>
        <button *ngIf="isLoggedIn()" mat-menu-item (click)="logout()">
          <mat-icon aria-label="Login">exit_to_app</mat-icon>
          Logout
        </button>
      </mat-menu>
    </mat-toolbar-row>
  </mat-toolbar>

  <!-- Progress Bar -->
  <mat-progress-bar *ngIf="loading" color="accent" mode="indeterminate"></mat-progress-bar>

  <!-- Left Side Nav -->
  <mat-sidenav-container class="side-nav">
    <mat-sidenav #leftnav opened mode="side" role="navigation">
      <!-- Avatar + Welcome -->
      <mat-card class="avatar" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="1rem">
        <div fxFlexAlign="end" matTooltip="Switch to buy/sell mode">
          <mat-slide-toggle #navToggle checked labelPosition="before">{{
            navToggle.checked ? 'Buy' : 'Sell'
          }}</mat-slide-toggle>
        </div>

        <h3>Welcome {{ user }}</h3>

        <div class="user-avatar"></div>
      </mat-card>

      <!-- Expansion nav -->
      <mat-nav-list>
        <mat-list-item>
          <mat-icon>home</mat-icon>
          <a matLine [routerLink]="['/home']" routerLinkActive="router-link-active">Home</a>
        </mat-list-item>
      </mat-nav-list>

      <mat-accordion class="main-accordion" multi="false" displayMode="flat">
        <!-- Products group -->
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-icon class="fas fa-cookie-bite"></mat-icon>
            <span>Products</span>
          </mat-expansion-panel-header>
          <!-- Expand list -->
          <mat-nav-list>
            <mat-list-item [routerLink]="['/product-buy']">
              <mat-icon>list</mat-icon>
              <a matLine>Product lists</a>
            </mat-list-item>
            <mat-list-item [routerLink]="['/product-buy/remain']">
              <mat-icon>line_style</mat-icon>
              <a matLine>Products remaining</a>
            </mat-list-item>
            <mat-list-item>
              <mat-icon color="accent" fontSet="fab" fontIcon="fa-accusoft"></mat-icon>
              <a matLine [routerLink]="['/supplier/reports']">Reports</a>
            </mat-list-item>
          </mat-nav-list>
        </mat-expansion-panel>

        <!-- Suppliers group -->
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-icon class="fas fa-diagnoses"></mat-icon>
            <span>Suppliers</span>
          </mat-expansion-panel-header>
          <!-- Expand list -->
          <mat-nav-list>
            <mat-list-item [routerLink]="['/supplier']">
              <mat-icon>list</mat-icon>
              <a matLine>Supplier lists</a>
            </mat-list-item>
            <mat-list-item [routerLink]="['/supplier/reports']">
              <mat-icon color="accent" fontSet="fab" fontIcon="fa-accusoft"></mat-icon>
              <a matLine>Reports</a>
            </mat-list-item>
          </mat-nav-list>
        </mat-expansion-panel>

        <!-- Orders group -->
        <mat-expansion-panel hideToggle>
          <mat-expansion-panel-header>
            <mat-icon class="fas fa-donate"></mat-icon>
            <span>Orders</span>
          </mat-expansion-panel-header>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-sidenav>

    <!-- Content router-outlet -->
    <mat-sidenav-content role="main">
      <router-outlet></router-outlet>
      <section class="footer">
        Place holder for footer
      </section>
    </mat-sidenav-content>
  </mat-sidenav-container>
</main>
