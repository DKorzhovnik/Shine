<!-- Formgroup -->
<form [formGroup]="formGroupDetail" fxLayout="row" fxLayoutAlign="space-around stretch">
  <div fxLayoutGap="8px">
    <!-- ProductId -->
    <mat-form-field appearance="outline">
      <mat-label>Select a product</mat-label>
      <mat-select placeholder="Select a product" formControlName="productId" required autofocus>
        <mat-option *ngFor="let product of products" [value]="product">
          {{product.productName}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="get('productId').invalid">{{getErrorMessage(get('productId'))}}</mat-error>
    </mat-form-field>
    <!-- Quantity -->
    <mat-form-field appearance="outline">
      <mat-label>Quantity</mat-label>
      <input matInput placeholder="Quantity" formControlName="quantity" required>
      <mat-error *ngIf="get('quantity').invalid">{{getErrorMessage(get('quantity'))}}</mat-error>
    </mat-form-field>
    <!-- Price -->
    <mat-form-field appearance="outline">
      <mat-label>Price</mat-label>
      <input matInput placeholder="Price" formControlName="price" required>
      <mat-error *ngIf="get('price').invalid">{{getErrorMessage(get('price'))}}</mat-error>
    </mat-form-field>
    <!-- Tax -->
    <mat-form-field appearance="outline">
      <mat-label>Tax</mat-label>
      <input matInput placeholder="Tax" formControlName="tax" required>
      <mat-error *ngIf="get('tax').invalid">{{getErrorMessage(get('tax'))}}</mat-error>
    </mat-form-field>
    <!-- Rate -->
    <mat-form-field appearance="outline">
      <mat-label>Rate</mat-label>
      <input matInput placeholder="Rate" formControlName="rate" required>
      <mat-error *ngIf="get('rate').invalid">{{getErrorMessage(get('rate'))}}</mat-error>
    </mat-form-field>
    <!-- Unit -->
    <mat-form-field appearance="outline">
      <mat-label>Unit</mat-label>
      <input matInput placeholder="Unit" formControlName="unit" required>
      <mat-error *ngIf="get('unit').invalid">{{getErrorMessage(get('unit'))}}</mat-error>
    </mat-form-field>
  </div>
  <!-- Add icon -->
  <div>
    <button mat-icon-button color="primary" (click)="addProduct()">
      <mat-icon matTooltip="Add product" aria-label="Add product">add_circle</mat-icon>
    </button>
  </div>
</form>

<!-- TODO test outtput productsorder to main -->
<!-- <button mat-button (click)="outProductOrders()">Ouput to main</button> -->

<mat-divider></mat-divider>

<!-- Order details table -->
<mat-card class="mat-elevation-z">
  <table>
    <tr>
      <th colspan="7">
        <mat-card class="table-title">
          {{tableTitle}}
        </mat-card>
      </th>
    </tr>
    <tr>
      <th>Product</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Tax</th>
      <th>Rate</th>
      <th>Unit</th>
      <th></th>
    </tr>
    <tr class="row-content" *ngFor="let product of productsToAdd">
      <td>{{product?.productName}}</td>
      <td>{{product?.quantity}}</td>
      <td>{{product?.price | currency}}</td>
      <td>{{product?.tax | percent}}</td>
      <td>{{product?.rate}}</td>
      <td>{{product?.unit}}</td>
      <td>
        <button mat-icon-button color="warn" (click)="removeProduct(product)">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </tr>
  </table>
</mat-card>
